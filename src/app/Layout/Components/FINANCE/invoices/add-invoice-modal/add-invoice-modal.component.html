<div class="form-container">
  <div class="modal_header_container">
    <div class="modal_header_text">Add New Invoice</div>
  </div>

  <form [formGroup]="invoiceForm" (ngSubmit)="onSubmit()">
    <div class="row1">
      <nz-row [nzGutter]="16">
        <nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Invoice Name</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('name')">
              <input
                nz-input
                formControlName="name"
                placeholder="Enter invoice name"
              />
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Amount</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('amount')">
              <nz-input-number
                formControlName="amount"
                [nzMin]="0.01"
                [nzStep]="0.01"
                nzPlaceHolder="Enter amount"
                style="width: 100%"
              ></nz-input-number>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>

      <nz-row [nzGutter]="16">
        <nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-label nzRequired>Description</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('description')">
              <textarea
                nz-input
                formControlName="description"
                placeholder="Enter invoice description"
                rows="3"
              ></textarea>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>

      <nz-row [nzGutter]="16">
        <nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Start Date</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('start_date')">
              <nz-date-picker
                formControlName="start_date"
                nzPlaceHolder="Select start date"
                style="width: 100%"
              ></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label nzRequired>End Date</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('end_date')">
              <nz-date-picker
                formControlName="end_date"
                nzPlaceHolder="Select end date"
                style="width: 100%"
              ></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>

      <nz-row [nzGutter]="16">
        <nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label>Project ID</nz-form-label>
            <nz-form-control>
              <input
                nz-input
                formControlName="project_id"
                placeholder="Enter project ID (optional)"
              />
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Department ID</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('department_id')">
              <input
                nz-input
                formControlName="department_id"
                placeholder="Enter department ID"
              />
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>

      <nz-row [nzGutter]="16">
        <nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-label nzRequired>Created By</nz-form-label>
            <nz-form-control [nzErrorTip]="getFieldError('created_by')">
              <input
                nz-input
                formControlName="created_by"
                placeholder="Enter creator name"
              />
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>
    </div>

    <div *ngIf="formError" class="form-error">
      <nz-alert nzType="error" [nzMessage]="formError" nzShowIcon></nz-alert>
    </div>

    <div class="modal-footer">
      <button
        nz-button
        nzType="default"
        (click)="onCancel()"
        [disabled]="isSubmitting"
      >
        Cancel
      </button>
      <button
        nz-button
        nzType="primary"
        type="submit"
        [nzLoading]="isSubmitting"
        class="btn__high_orange"
      >
        {{ isSubmitting ? "Creating..." : "Create Invoice" }}
      </button>
    </div>
  </form>
</div>
