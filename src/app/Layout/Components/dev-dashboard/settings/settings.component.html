<div class="settings-container">
  <!-- Header Section -->
  <div class="settings-header">
    <div class="header-content">
      <h2 class="page-title">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="3" />
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
          />
        </svg>
        Application Settings
      </h2>
      <p class="page-description">
        Configure your application preferences, notifications, and security
        settings
      </p>
    </div>
  </div>

  <!-- Settings Content -->
  <div class="settings-content">
    <!-- Settings Overview Cards -->
    <div class="overview-cards">
      <div class="overview-card notifications-card">
        <div class="card-icon">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
            <path d="M13.73 21a2 2 0 0 1-3.46 0" />
          </svg>
        </div>
        <div class="card-content">
          <h4>Notifications</h4>
          <p>{{ getNotificationCount() }} of 6 enabled</p>
        </div>
        <nz-tag [nzColor]="getNotificationCount() > 3 ? 'green' : 'orange'">
          {{ getNotificationCount() > 3 ? "Active" : "Limited" }}
        </nz-tag>
      </div>

      <div class="overview-card security-card">
        <div class="card-icon">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
          </svg>
        </div>
        <div class="card-content">
          <h4>Security Score</h4>
          <p>{{ getSecurityScore() }}% secure</p>
        </div>
        <nz-tag [nzColor]="getSecurityScoreColor()">
          {{
            getSecurityScore() >= 75
              ? "Excellent"
              : getSecurityScore() >= 50
              ? "Good"
              : "Needs Improvement"
          }}
        </nz-tag>
      </div>

      <div class="overview-card theme-card">
        <div class="card-icon">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M12 2v2" />
            <path d="M12 20v2" />
            <path d="M4.93 4.93l1.41 1.41" />
            <path d="M17.66 17.66l1.41 1.41" />
            <path d="M2 12h2" />
            <path d="M20 12h2" />
            <path d="M6.34 17.66l-1.41 1.41" />
            <path d="M19.07 4.93l-1.41 1.41" />
          </svg>
        </div>
        <div class="card-content">
          <h4>Appearance</h4>
          <p>{{ appearanceSettings.theme | titlecase }} theme</p>
        </div>
        <nz-tag [nzColor]="'blue'">{{
          appearanceSettings.language.toUpperCase()
        }}</nz-tag>
      </div>
    </div>

    <!-- Settings Actions -->
    <div class="settings-actions">
      <button
        nz-button
        nzType="default"
        (click)="exportSettings()"
        class="action-btn"
      >
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-15" />
          <polyline points="7,10 12,15 17,10" />
          <line x1="12" y1="15" x2="12" y2="3" />
        </svg>
        Export Settings
      </button>

      <label class="action-btn import-btn">
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
          <polyline points="17,8 12,3 7,8" />
          <line x1="12" y1="3" x2="12" y2="15" />
        </svg>
        Import Settings
        <input
          type="file"
          accept=".json"
          (change)="importSettings($event)"
          style="display: none"
        />
      </label>

      <button
        nz-button
        nzType="default"
        nzDanger
        (click)="resetAllSettings()"
        class="action-btn"
      >
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
          <path d="M21 3v5h-5" />
          <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
          <path d="M8 16H3v5" />
        </svg>
        Reset All
      </button>
    </div>

    <!-- Settings Tabs -->
    <div class="settings-tabs">
      <nz-tabset
        [(nzSelectedIndex)]="activeTab"
        nzType="card"
        class="settings-tabset"
      >
        <!-- Notifications Tab -->
        <nz-tab nzTitle="Notifications">
          <div class="tab-content">
            <form
              [formGroup]="notificationForm"
              (ngSubmit)="onNotificationSubmit()"
              class="settings-form"
            >
              <div class="form-section">
                <h4 class="section-title">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                    <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                  </svg>
                  Email Notifications
                </h4>
                <p class="section-description">
                  Choose which notifications you want to receive via email
                </p>

                <div class="notification-options">
                  <div class="notification-item">
                    <div class="notification-info">
                      <h5>Project Updates</h5>
                      <p>
                        Get notified when projects are created, updated, or
                        completed
                      </p>
                    </div>
                    <nz-switch
                      formControlName="projectUpdates"
                      nzSize="default"
                    >
                    </nz-switch>
                  </div>

                  <div class="notification-item">
                    <div class="notification-info">
                      <h5>Task Assignments</h5>
                      <p>
                        Receive notifications when tasks are assigned to you
                      </p>
                    </div>
                    <nz-switch
                      formControlName="taskAssignments"
                      nzSize="default"
                    >
                    </nz-switch>
                  </div>

                  <div class="notification-item">
                    <div class="notification-info">
                      <h5>Team Messages</h5>
                      <p>Get notified about team communications and mentions</p>
                    </div>
                    <nz-switch formControlName="teamMessages" nzSize="default">
                    </nz-switch>
                  </div>

                  <div class="notification-item">
                    <div class="notification-info">
                      <h5>System Updates</h5>
                      <p>
                        Receive notifications about system maintenance and
                        updates
                      </p>
                    </div>
                    <nz-switch formControlName="systemUpdates" nzSize="default">
                    </nz-switch>
                  </div>

                  <div class="notification-item">
                    <div class="notification-info">
                      <h5>Weekly Reports</h5>
                      <p>Get weekly summary reports of your activities</p>
                    </div>
                    <nz-switch formControlName="weeklyReports" nzSize="default">
                    </nz-switch>
                  </div>

                  <div class="notification-item">
                    <div class="notification-info">
                      <h5>Security Alerts</h5>
                      <p>Important security notifications and login alerts</p>
                    </div>
                    <nz-switch
                      formControlName="securityAlerts"
                      nzSize="default"
                    >
                    </nz-switch>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button
                  nz-button
                  nzType="primary"
                  type="submit"
                  [nzLoading]="loading"
                  [disabled]="loading"
                  class="submit-btn"
                >
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                    />
                    <polyline points="17,21 17,13 7,13 7,21" />
                    <polyline points="7,3 7,8 15,8" />
                  </svg>
                  {{ loading ? "Saving..." : "Save Notification Settings" }}
                </button>
              </div>
            </form>
          </div>
        </nz-tab>

        <!-- Security Tab -->
        <nz-tab nzTitle="Security">
          <div class="tab-content">
            <form
              [formGroup]="securityForm"
              (ngSubmit)="onSecuritySubmit()"
              class="settings-form"
            >
              <div class="form-section">
                <h4 class="section-title">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                  </svg>
                  Security Settings
                </h4>
                <p class="section-description">
                  Configure security options to protect your account
                </p>

                <div class="security-options">
                  <div class="security-item">
                    <div class="security-info">
                      <h5>Two-Factor Authentication</h5>
                      <p>Add an extra layer of security to your account</p>
                    </div>
                    <div class="security-actions">
                      <nz-switch
                        formControlName="twoFactorEnabled"
                        nzSize="default"
                        (ngModelChange)="$event && enable2FA()"
                      >
                      </nz-switch>
                      <button
                        *ngIf="!securityForm.get('twoFactorEnabled')?.value"
                        nz-button
                        nzType="primary"
                        nzSize="small"
                        (click)="enable2FA()"
                        class="setup-btn"
                      >
                        Setup
                      </button>
                    </div>
                  </div>

                  <div class="security-item">
                    <div class="security-info">
                      <h5>Session Timeout</h5>
                      <p>Automatically log out after period of inactivity</p>
                    </div>
                    <div class="security-input">
                      <nz-input-number
                        formControlName="sessionTimeout"
                        [nzMin]="5"
                        [nzMax]="480"
                        [nzStep]="5"
                        nzPlaceHolder="Minutes"
                        style="width: 120px"
                      >
                      </nz-input-number>
                      <span class="input-suffix">minutes</span>
                    </div>
                  </div>

                  <div class="security-item">
                    <div class="security-info">
                      <h5>Login Alerts</h5>
                      <p>Get notified of new login attempts</p>
                    </div>
                    <nz-switch formControlName="loginAlerts" nzSize="default">
                    </nz-switch>
                  </div>

                  <div class="security-item">
                    <div class="security-info">
                      <h5>Device Tracking</h5>
                      <p>Monitor and track device access to your account</p>
                    </div>
                    <nz-switch
                      formControlName="deviceTracking"
                      nzSize="default"
                    >
                    </nz-switch>
                  </div>
                </div>

                <div class="security-score">
                  <h5>Security Score: {{ getSecurityScore() }}%</h5>
                  <nz-progress
                    [nzPercent]="getSecurityScore()"
                    [nzStatus]="
                      getSecurityScore() >= 75
                        ? 'success'
                        : getSecurityScore() >= 50
                        ? 'normal'
                        : 'exception'
                    "
                    [nzStrokeColor]="getSecurityScoreColor()"
                  >
                  </nz-progress>
                </div>
              </div>

              <div class="form-actions">
                <button
                  nz-button
                  nzType="primary"
                  type="submit"
                  [nzLoading]="loading"
                  [disabled]="loading"
                  class="submit-btn"
                >
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                  </svg>
                  {{ loading ? "Updating..." : "Update Security Settings" }}
                </button>
              </div>
            </form>
          </div>
        </nz-tab>

        <!-- Preferences Tab -->
        <nz-tab nzTitle="Preferences">
          <div class="tab-content">
            <form
              [formGroup]="preferenceForm"
              (ngSubmit)="onPreferenceSubmit()"
              class="settings-form"
            >
              <div class="form-section">
                <h4 class="section-title">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 2v2" />
                    <path d="M12 20v2" />
                    <path d="M4.93 4.93l1.41 1.41" />
                    <path d="M17.66 17.66l1.41 1.41" />
                    <path d="M2 12h2" />
                    <path d="M20 12h2" />
                    <path d="M6.34 17.66l-1.41 1.41" />
                    <path d="M19.07 4.93l-1.41 1.41" />
                  </svg>
                  Appearance & Language
                </h4>
                <p class="section-description">
                  Customize your application appearance and regional settings
                </p>

                <div class="preference-grid">
                  <div class="preference-item">
                    <label class="preference-label">Theme</label>
                    <nz-select
                      formControlName="theme"
                      nzPlaceHolder="Select theme"
                      class="preference-select"
                    >
                      <nz-option nzValue="light" nzLabel="Light"></nz-option>
                      <nz-option nzValue="dark" nzLabel="Dark"></nz-option>
                      <nz-option
                        nzValue="auto"
                        nzLabel="Auto (System)"
                      ></nz-option>
                    </nz-select>
                  </div>

                  <div class="preference-item">
                    <label class="preference-label">Language</label>
                    <nz-select
                      formControlName="language"
                      nzPlaceHolder="Select language"
                      class="preference-select"
                    >
                      <nz-option nzValue="en" nzLabel="English"></nz-option>
                      <nz-option nzValue="es" nzLabel="Spanish"></nz-option>
                      <nz-option nzValue="fr" nzLabel="French"></nz-option>
                      <nz-option nzValue="de" nzLabel="German"></nz-option>
                      <nz-option nzValue="zh" nzLabel="Chinese"></nz-option>
                    </nz-select>
                  </div>

                  <div class="preference-item">
                    <label class="preference-label">Date Format</label>
                    <nz-select
                      formControlName="dateFormat"
                      nzPlaceHolder="Select date format"
                      class="preference-select"
                    >
                      <nz-option
                        nzValue="MM/DD/YYYY"
                        nzLabel="MM/DD/YYYY"
                      ></nz-option>
                      <nz-option
                        nzValue="DD/MM/YYYY"
                        nzLabel="DD/MM/YYYY"
                      ></nz-option>
                      <nz-option
                        nzValue="YYYY-MM-DD"
                        nzLabel="YYYY-MM-DD"
                      ></nz-option>
                    </nz-select>
                  </div>

                  <div class="preference-item">
                    <label class="preference-label">Timezone</label>
                    <nz-select
                      formControlName="timezone"
                      nzPlaceHolder="Select timezone"
                      class="preference-select"
                    >
                      <nz-option
                        nzValue="UTC"
                        nzLabel="UTC (Coordinated Universal Time)"
                      ></nz-option>
                      <nz-option
                        nzValue="EST"
                        nzLabel="EST (Eastern Standard Time)"
                      ></nz-option>
                      <nz-option
                        nzValue="PST"
                        nzLabel="PST (Pacific Standard Time)"
                      ></nz-option>
                      <nz-option
                        nzValue="CST"
                        nzLabel="CST (Central Standard Time)"
                      ></nz-option>
                      <nz-option
                        nzValue="MST"
                        nzLabel="MST (Mountain Standard Time)"
                      ></nz-option>
                    </nz-select>
                  </div>
                </div>

                <div class="preference-switches">
                  <div class="preference-switch">
                    <div class="switch-info">
                      <h5>Sidebar Collapsed</h5>
                      <p>Keep the sidebar collapsed by default</p>
                    </div>
                    <nz-switch
                      formControlName="sidebarCollapsed"
                      nzSize="default"
                    >
                    </nz-switch>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button
                  nz-button
                  nzType="primary"
                  type="submit"
                  [nzLoading]="loading"
                  [disabled]="loading"
                  class="submit-btn"
                >
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 2v2" />
                    <path d="M12 20v2" />
                    <path d="M4.93 4.93l1.41 1.41" />
                    <path d="M17.66 17.66l1.41 1.41" />
                    <path d="M2 12h2" />
                    <path d="M20 12h2" />
                    <path d="M6.34 17.66l-1.41 1.41" />
                    <path d="M19.07 4.93l-1.41 1.41" />
                  </svg>
                  {{ loading ? "Saving..." : "Save Preferences" }}
                </button>
              </div>
            </form>
          </div>
        </nz-tab>
      </nz-tabset>
    </div>
  </div>
</div>
