<div class="modal_content">
  <form class="form-figure send_mail_form" [formGroup]="sendEmail">
    <div nz-row [nzGutter]="10">
      <div nz-col nzLg="24">
        <nz-form-item>
          <nz-form-label
            >Agent Name
            <span class="required-mark">*</span>
          </nz-form-label>
          <nz-form-control>
            <nz-select
              class="modal-dropdown"
              bindLabel=""
              nzPlaceHolder="Select Agent"
              nzSuffixIcon="caret-down"
              nzAllowClear
              formControlName="selectAgent"
              nzShowSearch
              (ngModelChange)="getAgentName($event)"
            >
              <nz-option
                [nzValue]="agent"
                [nzLabel]="agent.agentName"
                *ngFor="let agent of agentListData"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <div class="form-figure">
      <div nz-row [nzGutter]="10" class="sec2">
        <div nz-col nzLg="12">
          <nz-form-item>
            <nz-form-label
              >Agent Customers
              <span class="required-mark">*</span>
            </nz-form-label>
            <nz-select
              nzAllowClear="true"
              [nzShowSearch]="true"
              class="modal-dropdown"
              placeholder="Search Sender"
              formControlName="filter"
              (nzOnSearch)="searchrxjs($event)"
              (change)="onChangeSender($event)"
            >
              <nz-option
                *ngFor="let o of searchResult"
                [nzLabel]="o.senderFirstName + ' ' + o.senderLastName"
                [nzValue]="o"
              ></nz-option>
            </nz-select>
          </nz-form-item>
        </div>
        <div nz-col nzLg="6">
          <nz-form-item>
            <nz-form-label>Add New E-Mail</nz-form-label>
            <nz-form-control>
              <input
                nz-input
                type="text"
                placeholder="Name"
                class="modal-input"
                formControlName="addNewEmail"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzLg="6">
          <button class="btn_blue" (click)="addNewCustomer()">
            Add Customer
          </button>
        </div>
      </div>
      <div class="ancor_text" *ngIf="viewTable">
        <a (click)="selectAll(); unselectAll()">Unselect All</a>
      </div>
      <div class="ancor_text" *ngIf="!viewTable">
        <a (click)="selectAll(); addNewCustomer()">Select All</a>
      </div>
      <nz-table class="modal_table">
        <thead>
          <tr nz-row>
            <th nz-col nzLg="7">CUSTOMER NAME</th>
            <th nz-col nzLg="7">AGENT NAME</th>
            <th nz-col nzLg="7">EMAIL</th>
            <th nz-col nzLg="3">PAYING</th>
          </tr>
        </thead>
        <tbody>
          <tr nz-row *ngFor="let data of agentSenderData">
            <td nz-col nzLg="7">
              {{ data.senderFirstName + " " + data.senderLastName }}
            </td>
            <td nz-col nzLg="7">{{ selectedAgentName }}</td>
            <td nz-col nzLg="7">{{ data.email }}</td>
            <td nz-col nzLg="3">
              <a
                ><img
                  class="images"
                  src="./assets/icons/Close red.svg"
                  (click)="removeCustomer(data)"
              /></a>
            </td>
          </tr>
        </tbody>
      </nz-table>
      <div nz-row [nzGutter]="10">
        <div nz-col nzLg="24">
          <nz-form-item>
            <nz-form-label>Add New Email </nz-form-label>

            <nz-form-control>
              <input
                nz-input
                type="text"
                placeholder="Enter New Email Address"
                class="modal-input"
                formControlName="newEmail"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="10">
        <div nz-col nzLg="24">
          <nz-form-item>
            <nz-form-label
              >Subject <span class="required-mark">*</span></nz-form-label
            >
            <nz-form-control>
              <input
                nz-input
                type="text"
                placeholder="Enter Email Subject"
                class="modal-input"
                formControlName="subject"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div>
        <nz-form-item>
          <nz-form-label
            >Message
            <span class="required-mark">*</span>
          </nz-form-label>
          <nz-form-control>
            <angular-editor
              placeholder="Enter message here..."
              [config]="editorConfig"
              formControlName="mailBody"
            ></angular-editor>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div class="btn_row">
      <div>
        <button class="btn btn__next" (click)="closeMail()">Cancel</button>
      </div>
      <div>
        <button class="btn btn__cancel" (click)="sendMail()">Send</button>
      </div>
    </div>
  </form>
</div>
